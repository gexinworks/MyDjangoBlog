upstream djangoblog_server {
	server unix:/installpkg/DjangoBlog/gunicorn.sock fail_timeout=0;
	keepalive 80;
}

server {
	#其他配置...
	location ^~ /admin/ {
		proxy_http_version       1.1;

		add_header               Strict-Transport-Security "max-age=31536000; includeSubDomains; preload";

		add_header               X-Frame-Options DENY;

		add_header               X-Content-Type-Options nosniff;
		proxy_set_header Host $http_host;
		proxy_redirect off;

		proxy_set_header         X-Forwarded-For  $proxy_add_x_forwarded_for;
		if (!-f $request_filename) {
				proxy_pass http://djangoblog_server;			
				break;
		}

	}

	location / {

		# proxy_set_header X-Forwarded-Proto https;

		proxy_set_header Host $http_host;
		proxy_redirect off;

		# proxy_buffering off;

		# Try to serve static files from nginx, no point in making an
		# *application* server like Unicorn/Rainbows! serve static files.

		if (!-f $request_filename) {
				proxy_pass http://djangoblog_server;					
				break;
		}
	}

}
